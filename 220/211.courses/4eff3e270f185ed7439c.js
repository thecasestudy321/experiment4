webpackJsonp([211],{169:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,i,a){for(var n=new PIXI.Container,o=new PIXI.filters.ColorMatrixFilter,r=i||!1,p=a||{addArrow:!1,type:"horizontal",scale:1},s=new PIXI.Container,l=0;l<3;++l){var c=l+1,d=PIXI.Sprite.fromFrame("TAP_1"+c);d.x=-d.width/2,d.y=-d.height/2;var h=new PIXI.Container;h.addChild(d),s.addChild(h)}var u=0;if(p.direction)switch(p.direction){case"top":u=-Math.PI/2;break;case"bottom":u=Math.PI/2;break;case"left":u=Math.PI;break;case"right":u=0;break;default:u=0}s.filters=[o];for(var v=0;v<s.children.length;v++){var w=s.children[v];w.scale.x=w.scale.y=2,v<2&&M(w,.75*v)}if(n.addChild(s),p.addArrow){var x,f;if(p.direction){x=PIXI.Sprite.fromFrame("oneArrow"),f=new PIXI.extras.MovieClip([x]);var T=p.scale?p.scale:1;f.scale.x=f.scale.y=T,f.pivot={x:0,y:f.height/2},f.rotation=u}else{x=PIXI.Sprite.fromFrame("NBarrow"),(f=new PIXI.extras.MovieClip([x])).pivot={x:f.width/2,y:f.height/2};var y=p.scale?p.scale:1;f.scale.x=f.scale.y=y,"horizontal"!==(p.type?p.type:"horizontal")&&(f.rotation=Math.PI/2)}n.addChild(f),n.arrow=f,n.addEventListener("hideArrow",function(){f.alpha=0,f.visible=!1}),n.addEventListener("showArrow",function(){f.alpha=1,f.visible=!0})}s.alpha=.4;var m=new PIXI.Graphics;function M(e,t){TweenMax.to(e,1.5,{delay:t,alpha:0,repeat:-1}),TweenMax.to(e.scale,1.5,{x:5,y:5,delay:t,repeat:-1})}return m.beginFill(16776960,0),m.drawRect(-50,-50,100,100),n.addChild(m),n.addEventListener(MouseEvent.MOUSE_OVER,function(){s.alpha=.6}),n.addEventListener(MouseEvent.MOUSE_OUT,function(){s.alpha=.4}),n.addEventListener(TouchEvent.TOUCH_BEGIN,function(){n.emit(n.event.TAP),!r&&n.parent&&n.parent.removeChild(n)}),n.x=e,n.y=t,n.setColor=function(e){var t=e>>16,i=e>>8&255,a=255&e;o._loadMatrix([t,0,0,0,0,0,i,0,0,0,0,0,a,0,0,0,0,0,255,0],!1),s.filters=[o]},n.setRotation=function(e){n.rotation=e},n.showAllDir=function(){if(p.direction)for(var e=0;e<3;e++){var t=new PIXI.Container;t.addChild(PIXI.Sprite.fromFrame("oneArrow")),n.addChild(t),t.pivot={x:0,y:f.height/2},t.rotation=Math.PI/2*(e+1)}else{var i=new PIXI.Container;i.addChild(PIXI.Sprite.fromFrame("NBarrow")),n.addChild(i),i.pivot={x:f.width/2,y:f.height/2},i.rotation=n.rotation+Math.PI/2}},n.event={TAP:"pointTap",HIDEARR:"hideArrow",SHOWARR:"showArrow"},instance.info&&instance.info.newLayOut&&n.scale.set(.6,.6),n}},344:function(e,t,i){"use strict";var a=function(e){return e&&e.__esModule?e:{default:e}}(i(169));nb.substance0120=extendsClass(ScienceMain,{frame0:function(){var e=this,t=e.papers;e.chop.visible=!1,e.paper.visible=!1,e.paper1.visible=!1,e.cup1.alpha=0;for(var i=[],n=1;n<3;n++){var o=e["step"+n];o.visible=!1,o.alpha=0,i.push(o)}var r=e.chop.x,p=e.chop.y,s=e.paper.x,l=e.paper.y;t.addEventListener(TouchEvent.TOUCH_BEGIN,d),t.addEventListener(TouchEvent.TOUCH_END_OUDSIDE,u),t.addEventListener(TouchEvent.TOUCH_END,u),instance.NBDownTip.showTip("请将抽纸拖到左侧烧杯中");var c=(0,a.default)(t.width/2,t.height/2);function d(){t.removeChild(c),instance.NBDownTip.hideTip(),e.papers.addEventListener(TouchEvent.TOUCH_MOVE,h),e.paper.visible=!0}function h(t){var i=e.toLocal({x:t.data.global.x,y:t.data.global.y});e.paper.x=i.x,e.paper.y=i.y}function u(t){if(e.paper.x=s,e.paper.y=l,e.paper.visible=!1,e.papers.removeListener(TouchEvent.TOUCH_MOVE,h),e.paper.hitTest(e.ref)){e.papers.removeListener(TouchEvent.TOUCH_BEGIN,d),e.papers.removeListener(TouchEvent.TOUCH_END,u),e.papers.removeListener(TouchEvent.TOUCH_END_OUDSIDE,u),TweenMax.to(e.papers,.5,{alpha:0,onComplete:function(){e.papers.visible=!1}});var a=e.toLocal({x:t.data.global.x,y:t.data.global.y}),n=PIXI.Sprite.fromFrame("paper1.png");e.addChild(n),e.addChild(e.cup),e.paper.visible=!1,n.x=a.x-e.paper1.width/2,n.y=a.y-e.paper1.height/2;var o=new TimelineMax;o.append(TweenMax.to(n,.5,{x:e.cup.x+e.cup.width/4,y:e.cup.y-n.height-$s(20)})),o.append(TweenMax.to(n,.5,{x:e.cup.x+e.cup.width/4,y:e.cup.y+$s(120),onComplete:function(){e.chop.alpha=1,e.chop.visible=!0,TweenMax.to(e.cup1,.8,{alpha:1}),TweenMax.to(n,.8,{y:n.y+n.height/2}),TweenMax.to(n.scale,.8,{y:.5}),TweenMax.to(e.chop,.2,{y:e.cup.y-$s(20),yoyo:!0,repeat:4,ease:Linear.easeNone,onComplete:function(){TweenMax.to(n,.8,{alpha:0}),TweenMax.to(e.chop,.2,{x:e.cup.x+$s(20),yoyo:!0,repeat:4,ease:Linear.easeNone,onComplete:function(){e.removeChild(n),function(){var t=i[0];e.chop.alpha=0,e.chop.x=r,e.chop.y=p,t.visible=!0,e.cup.visible=!1,t.cup.visible=!1,instance.frame1.apply(t),TweenMax.to(e.cup1,.5,{x:e.cupPos.x,y:e.cupPos.y}),TweenMax.to(t,.5,{alpha:1,delay:.5,onComplete:function(){t.cup.visible=!0,e.cup1.visible=!1,t.cup.addChild(c),c.position.set(t.cup.width/2,t.cup.height/2),t.cup.tapPoint=c,instance.NBDownTip.showTip("请将烧杯中的纸浆倒在左侧过滤网上"),NBDrag.addDrag(t.cup)}})}()}})}})}}))}}t.addChild(c);var v=!1,w=!1;e.onUpdate=function(){if(!v&&15==e.step1.iron.currentFrame){var t=new TimelineMax({onComplete:function(){v=!0,function(){var e=i[1];e.ironResult.visible=!1,e.visible=!0,e.iron.visible=e.paper.visible=!1,instance.frame2.apply(e);var t=i[0];TweenMax.to(t.iron,.5,{x:t.ironPos.x,y:t.ironPos.y}),TweenMax.to(t.iron.scale,.5,{x:1.397,y:1.397}),TweenMax.to(e,.5,{alpha:1,delay:.5,onComplete:function(){e.iron.visible=e.paper.visible=!0,t.iron.visible=!1,e.towel.addChild(c),c.position.set(e.towel.width/2,e.towel.height/2-70),e.towel.tapPoint=c,instance.NBDownTip.showTip("请拖动毛巾到过滤网上"),NBDrag.addDrag(e.towel)}})}()}});t.append(TweenMax.to(e.step1.cup0,.5,{rotation:0})),t.append(TweenMax.to(e.step1.cup0,.5,{alpha:0}))}w||29!=e.step2.towel.currentFrame||(w=!0,function(){var e=i[1];TweenMax.to(e.towel,.5,{alpha:0}),TweenMax.to(e.ironResult.scale,.5,{x:1,y:1,delay:.5}),TweenMax.to(e.ironResult,.5,{x:e.ironPos.x,y:e.ironPos.y,delay:.5,onComplete:function(){e.ironResult.play(),e.ironResult.loop=!1,e.ironResult.animationSpeed=.2}})}())}},frame1:function(){var e=this,t=e.cup,i=e.cup0;e.iron.scale.x=2,e.iron.scale.y=2,i.visible=!1,i.henji.mask=e.henjiMask.children[0],i.henji.visible=!1,TweenMax.to(e.iron.scale,.5,{x:2,y:2}),e.cup.addEventListener(NBDrag.event.START_DRAG,function(){this.removeChild(this.tapPoint),instance.NBDownTip.hideTip()}),e.cup.addEventListener(NBDrag.event.STOP_DRAG,function(){e.cup.hitTest(e.ref)&&(NBDrag.removeDrag(e.cup),(new TimelineMax).append(TweenMax.to(e.cup,.5,{x:e.iron.x+$s(50),y:e.iron.y-$s(250),onComplete:function(){TweenMax.to(e.cup,1.5,{currentFrame:e.cup.totalFrames-1}),TweenMax.to(e.cup,1.5,{rotation:-Math.PI/3,onComplete:function(){i.x=t.x,i.y=t.y,i.rotation=t.rotation,i.visible=!0,t.visible=!1,TweenMax.to(e.iron,3,{currentFrame:e.iron.totalFrames-1}),TweenMax.to(i,1.5,{x:e.iron.x+$s(500),y:e.iron.y-$s(250)}),TweenMax.to(i.paper.scale,1.5,{x:0,y:0})}})}})))})},frame2:function(){var e=this;e.towel.addEventListener(NBDrag.event.START_DRAG,function(){instance.NBDownTip.hideTip(),this.removeChild(this.tapPoint)}),e.towel.addEventListener(NBDrag.event.STOP_DRAG,function(){e.towel.hitTest(e.ref)&&(NBDrag.removeDrag(e.towel),TweenMax.to(e.towel,.5,{x:e.iron.x+$s(30),y:e.iron.y-$s(5),onComplete:function(){e.paper.visible=e.iron.visible=!1,e.ironResult.visible=!0,e.towel.play(),e.towel.loop=!1,e.towel.animationSpeed=.2}}))})},frame3:function(){var e=this,t=!1;e.iron.addEventListener(TouchEvent.TAP,function(){0==t&&(t=!0,e.iron.play(),e.iron.loop=!1,e.iron.animationSpeed=.2)})},start:function(){this.menu.addStepFromObj(this.info),this.menu.setExperimentName(this.info.labName),this.bindScriptToSprite(this.frame0,"frame0")},info:{experimentImport:"造纸术是我国古代四大发明之一，一张纸是如何被造出来的呢？",title0:"paper",labName:"我们来造一张纸",CONCLUSION:"纸的制作过程分类：造浆 - 抄纸 - 压干 - 揭纸",noTitle:!0},const:{},event:{}}),e.exports=nb.substance0120}});