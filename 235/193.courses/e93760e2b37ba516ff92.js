webpackJsonp([193],{169:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,a,n){for(var i=new PIXI.Container,o=new PIXI.filters.ColorMatrixFilter,r=a||!1,d=n||{addArrow:!1,type:"horizontal",scale:1},s=new PIXI.Container,h=0;h<3;++h){var l=h+1,c=PIXI.Sprite.fromFrame("TAP_1"+l);c.x=-c.width/2,c.y=-c.height/2;var f=new PIXI.Container;f.addChild(c),s.addChild(f)}var p=0;if(d.direction)switch(d.direction){case"top":p=-Math.PI/2;break;case"bottom":p=Math.PI/2;break;case"left":p=Math.PI;break;case"right":p=0;break;default:p=0}s.filters=[o];for(var u=0;u<s.children.length;u++){var v=s.children[u];v.scale.x=v.scale.y=2,u<2&&C(v,.75*u)}if(i.addChild(s),d.addArrow){var T,w;if(d.direction){T=PIXI.Sprite.fromFrame("oneArrow"),w=new PIXI.extras.MovieClip([T]);var m=d.scale?d.scale:1;w.scale.x=w.scale.y=m,w.pivot={x:0,y:w.height/2},w.rotation=p}else{T=PIXI.Sprite.fromFrame("NBarrow"),(w=new PIXI.extras.MovieClip([T])).pivot={x:w.width/2,y:w.height/2};var x=d.scale?d.scale:1;w.scale.x=w.scale.y=x,"horizontal"!==(d.type?d.type:"horizontal")&&(w.rotation=Math.PI/2)}i.addChild(w),i.arrow=w,i.addEventListener("hideArrow",function(){w.alpha=0,w.visible=!1}),i.addEventListener("showArrow",function(){w.alpha=1,w.visible=!0})}s.alpha=.4;var I=new PIXI.Graphics;function C(e,t){TweenMax.to(e,1.5,{delay:t,alpha:0,repeat:-1}),TweenMax.to(e.scale,1.5,{x:5,y:5,delay:t,repeat:-1})}return I.beginFill(16776960,0),I.drawRect(-50,-50,100,100),i.addChild(I),i.addEventListener(MouseEvent.MOUSE_OVER,function(){s.alpha=.6}),i.addEventListener(MouseEvent.MOUSE_OUT,function(){s.alpha=.4}),i.addEventListener(TouchEvent.TOUCH_BEGIN,function(){i.emit(i.event.TAP),!r&&i.parent&&i.parent.removeChild(i)}),i.x=e,i.y=t,i.setColor=function(e){var t=e>>16,a=e>>8&255,n=255&e;o._loadMatrix([t,0,0,0,0,0,a,0,0,0,0,0,n,0,0,0,0,0,255,0],!1),s.filters=[o]},i.setRotation=function(e){i.rotation=e},i.showAllDir=function(){if(d.direction)for(var e=0;e<3;e++){var t=new PIXI.Container;t.addChild(PIXI.Sprite.fromFrame("oneArrow")),i.addChild(t),t.pivot={x:0,y:w.height/2},t.rotation=Math.PI/2*(e+1)}else{var a=new PIXI.Container;a.addChild(PIXI.Sprite.fromFrame("NBarrow")),i.addChild(a),a.pivot={x:w.width/2,y:w.height/2},a.rotation=i.rotation+Math.PI/2}},i.event={TAP:"pointTap",HIDEARR:"hideArrow",SHOWARR:"showArrow"},instance.info&&instance.info.newLayOut&&i.scale.set(.6,.6),i}},488:function(e,t,a){"use strict";var n=function(e){return e&&e.__esModule?e:{default:e}}(a(169));nb.substance0672=extendsClass(ScienceMain,{frame0:function(){var e=this;instance.viewStack.NBONOFF.visible=!1;var t=e.bottom,a=e.rote,i=e.magnet,o=e.paper,r=e.dir,d=[a,i,o],s=[t,a,a];i.frame=1,o.frame=2,i.offset=10,o.offset=30,r.alpha=0;var h=(0,n.default)(0,0);function l(){f(e[this.name+"TXT"],0),instance.NBDownTip.hideTip(),this.removeChild(h),e.addChild(this)}function c(){var n=this;function i(){2===a.currentFrame&&a.isReach?(a.isCom=!0,t.addChildWithSamePos(a),function(){function a(){this.interactive=!1,this.hitTest(r)?(t.isGoDir=!0,TweenMax.to(t,.5,{x:r.x,y:r.y}),TweenMax.to(t.scale,.5,{x:0,y:0,onComplete:function(){GlobalEffect.fadeOut(t),GlobalEffect.fadeIn(r.magLook),n()}})):u(this)}function n(){TweenMax.to(r.magLook,5,{rotation:-Math.PI/2,onComplete:function(){GlobalEffect.fadeIn(r.hand),r.hand.interactive=!0,r.hand.isTap||(r.hand.addChild(h),p())}})}r.hand.addEventListener(TouchEvent.TAP,function(){r.hand.removeChild(h),instance.NBDownTip.hideTip(),r.hand.isTap=!0,r.hand.animationSpeed=.3,r.hand.interactive=!1,r.hand.play(),r.hand.loop=!1,TweenMax.to(r.magLook,.5,{rotation:Math.PI*(.3*Math.random()),delay:.2,onComplete:function(){n()}}),setTimeout(function(){TweenMax.to(r.hand,.5,{alpha:0,onComplete:function(){r.hand.currentFrame=0}})},600)}),r.hand.interactive=!1,e.bottomTXT.text="旋转装置",TweenMax.to(r,1,{x:"+=900",ease:Sine.easeInOut,alpha:1}),TweenMax.to(t,1,{x:"+=400",ease:Sine.easeInOut,onComplete:function(){t.startPos={x:t.x,y:t.y},NBDrag.addDrag(t),t.addEventListener(NBDrag.event.START_DRAG,l),t.addEventListener(NBDrag.event.STOP_DRAG,a),p()}}),TweenMax.to(e.bottomTXT,1,{x:"+=400",ease:Sine.easeInOut})}()):p()}this.interactive=!1,n.hitTest(n.bindHit)?"rote"==this.name?(a.isReach=!0,TweenMax.to(n,.3,{x:n.bindHit.x+5,y:n.bindHit.y-35,ease:Sine.easeInOut,onComplete:function(){NBDrag.removeDrag(n),i()}})):TweenMax.to(n,.3,{x:n.bindHit.x,y:n.bindHit.y-n.offset,ease:Sine.easeInOut,onComplete:function(){GlobalEffect.fadeOut(n),n.bindHit.gotoAndStop(n.frame),"magnet"===n.name&&TweenMax.to(o,.5,{alpha:1,onComplete:function(){o.interactive=!0,o.visible=!0,f(e[o.name+"TXT"],1),p()}}),i()}}):u(n)}function f(e,t){TweenMax.killTweensOf(e),TweenMax.to(e,.2,{alpha:t})}function p(){if(console.log(a.isCom,!t.isGoDir),0===a.currentFrame)return instance.NBDownTip.showTip("将条形磁铁放入旋转部件中"),void i.addChild(h);if(1===a.currentFrame)instance.NBDownTip.showTip("将带数字的纸条贴到旋转部件中"),o.addChild(h);else{if(!a.isReach)return instance.NBDownTip.showTip("将旋转部件安装到底座上"),void a.addChild(h);a.isCom&&!t.isGoDir?(instance.NBDownTip.showTip("将旋转装置放到白纸上"),t.addChild(h)):r.hand.isTap||instance.NBDownTip.showTip("点击小手推动装置，观察现象")}}function u(t){TweenMax.to(t,.5,{x:t.startPos.x,y:t.startPos.y,onComplete:function(){f(e[t.name+"TXT"],1),t.interactive=!0,p()}})}p(),o.visible=!1,e.paperTXT.alpha=0,d.forEach(function(e,t){e.startPos={x:e.x,y:e.y},NBDrag.addDrag(e),e.bindHit=s[t],e.addEventListener(NBDrag.event.START_DRAG,l),e.addEventListener(NBDrag.event.STOP_DRAG,c)}),r.magLook.alpha=0,r.hand.alpha=0,r.hand.interactive=!1},start:function(){this.bindScriptToSprite(this.frame0,"frame0")},info:{experimentImport:"磁铁的磁极与方向有什么关系呢？做个实验看一下吧。",labName:"磁极与方向",CONCLUSION:"五",newLayOut:!0,isOffset:!0,bgColor:"#6699cc"},const:{},event:{}}),e.exports=nb.substance0672}});