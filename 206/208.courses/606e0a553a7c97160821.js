webpackJsonp([208],{169:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e,a,n){for(var i=new PIXI.Container,o=new PIXI.filters.ColorMatrixFilter,r=a||!1,h=n||{addArrow:!1,type:"horizontal",scale:1},d=new PIXI.Container,l=0;l<3;++l){var s=l+1,p=PIXI.Sprite.fromFrame("TAP_1"+s);p.x=-p.width/2,p.y=-p.height/2;var c=new PIXI.Container;c.addChild(p),d.addChild(c)}var v=0;if(h.direction)switch(h.direction){case"top":v=-Math.PI/2;break;case"bottom":v=Math.PI/2;break;case"left":v=Math.PI;break;case"right":v=0;break;default:v=0}d.filters=[o];for(var f=0;f<d.children.length;f++){var w=d.children[f];w.scale.x=w.scale.y=2,f<2&&E(w,.75*f)}if(i.addChild(d),h.addArrow){var T,u;if(h.direction){T=PIXI.Sprite.fromFrame("oneArrow"),u=new PIXI.extras.MovieClip([T]);var x=h.scale?h.scale:1;u.scale.x=u.scale.y=x,u.pivot={x:0,y:u.height/2},u.rotation=v}else{T=PIXI.Sprite.fromFrame("NBarrow"),(u=new PIXI.extras.MovieClip([T])).pivot={x:u.width/2,y:u.height/2};var M=h.scale?h.scale:1;u.scale.x=u.scale.y=M,"horizontal"!==(h.type?h.type:"horizontal")&&(u.rotation=Math.PI/2)}i.addChild(u),i.arrow=u,i.addEventListener("hideArrow",function(){u.alpha=0,u.visible=!1}),i.addEventListener("showArrow",function(){u.alpha=1,u.visible=!0})}d.alpha=.4;var y=new PIXI.Graphics;function E(t,e){TweenMax.to(t,1.5,{delay:e,alpha:0,repeat:-1}),TweenMax.to(t.scale,1.5,{x:5,y:5,delay:e,repeat:-1})}return y.beginFill(16776960,0),y.drawRect(-50,-50,100,100),i.addChild(y),i.addEventListener(MouseEvent.MOUSE_OVER,function(){d.alpha=.6}),i.addEventListener(MouseEvent.MOUSE_OUT,function(){d.alpha=.4}),i.addEventListener(TouchEvent.TOUCH_BEGIN,function(){i.emit(i.event.TAP),!r&&i.parent&&i.parent.removeChild(i)}),i.x=t,i.y=e,i.setColor=function(t){var e=t>>16,a=t>>8&255,n=255&t;o._loadMatrix([e,0,0,0,0,0,a,0,0,0,0,0,n,0,0,0,0,0,255,0],!1),d.filters=[o]},i.setRotation=function(t){i.rotation=t},i.showAllDir=function(){if(h.direction)for(var t=0;t<3;t++){var e=new PIXI.Container;e.addChild(PIXI.Sprite.fromFrame("oneArrow")),i.addChild(e),e.pivot={x:0,y:u.height/2},e.rotation=Math.PI/2*(t+1)}else{var a=new PIXI.Container;a.addChild(PIXI.Sprite.fromFrame("NBarrow")),i.addChild(a),a.pivot={x:u.width/2,y:u.height/2},a.rotation=i.rotation+Math.PI/2}},i.event={TAP:"pointTap",HIDEARR:"hideArrow",SHOWARR:"showArrow"},instance.info&&instance.info.newLayOut&&i.scale.set(.6,.6),i}},381:function(t,e,a){"use strict";var n=function(t){return t&&t.__esModule?t:{default:t}}(a(169));nb.substance0230=extendsClass(ScienceMain,{frame0:function(){var t=this;NBDrag.addDrag(t.head),NBDrag.addDrag(t.bot),NBDrag.addDrag(t.teil),NBDrag.addDrag(t.center),NBDrag.addDrag(t.total),t.Point0=(0,n.default)(-20,0),t.Point1=(0,n.default)(0,0),t.Point2=(0,n.default)(90,0),t.Point3=(0,n.default)(0,160),t.b0=t.head,t.b1=t.center,t.b2=t.teil,t.b3=t.bot;var e=t.center,a=t.total;instance.NBDownTip.noHide("拼装各个部件拼装风向标");for(var i=0;i<4;i++)a["a"+i].alpha=0;d();var o=!0;function r(){this.removeChild(this.Point)}function h(){t.complete?d():setTimeout(function(){d()},1e3)}function d(){for(var e=0,a=0;a<t.total.children.length;a++){if(!t.total["a"+a].alpha){t["b"+a].addChild(t["Point"+a]),t["b"+a].Point=t["Point"+a];break}e++}e===t.total.children.length&&(t.complete=!0,instance.NBDownTip.hideTip(),instance.NBDownTipsError.showTip("当前步骤已完成"),instance.NBStepsShow(1),t.complete=!0)}t.head.addEventListener(NBDrag.event.STOP_DRAG,function(){this.hitTest(e)&&(o=!1,TweenMax.to(this,.5,{alpha:0}),TweenMax.to(a.a0,.5,{alpha:1})),h()}),t.teil.addEventListener(NBDrag.event.STOP_DRAG,function(){this.hitTest(e)&&(o=!1,TweenMax.to(this,.5,{alpha:0}),TweenMax.to(a.a2,.5,{alpha:1})),h()}),t.bot.addEventListener(NBDrag.event.STOP_DRAG,function(){this.hitTest(e)&&(o=!1,TweenMax.to(this,.5,{alpha:0}),TweenMax.to(a.a3,.5,{alpha:1})),h()}),t.center.addEventListener(NBDrag.event.STOP_DRAG,function(){this.hitTest(t.head)&&(o=!1,TweenMax.to(t.head,.5,{alpha:0}),TweenMax.to(a.a0,.5,{alpha:1})),this.hitTest(t.teil)&&(o=!1,TweenMax.to(t.teil,.5,{alpha:0}),TweenMax.to(a.a2,.5,{alpha:1})),this.hitTest(t.bot)&&(o=!1,TweenMax.to(t.bot,.5,{alpha:0}),TweenMax.to(a.a3,.5,{alpha:1})),h()}),a.addEventListener(NBDrag.event.STOP_DRAG,function(){0==o&&(a.a1.hitTest(t.head)&&(o=!1,TweenMax.to(t.head,.5,{alpha:0}),TweenMax.to(a.a0,.5,{alpha:1})),a.a1.hitTest(t.teil)&&(o=!1,TweenMax.to(t.teil,.5,{alpha:0}),TweenMax.to(a.a2,.5,{alpha:1})),a.a1.hitTest(t.bot)&&(o=!1,TweenMax.to(t.bot,.5,{alpha:0}),TweenMax.to(a.a3,.5,{alpha:1}))),h()}),t.head.addEventListener(NBDrag.event.DRAG_MOVE,r),t.teil.addEventListener(NBDrag.event.DRAG_MOVE,r),t.bot.addEventListener(NBDrag.event.DRAG_MOVE,r),t.center.addEventListener(NBDrag.event.DRAG_MOVE,r),a.addEventListener(NBDrag.event.DRAG_MOVE,r),this.onUpdate=function(){o?(t.total.x=t.center.x,t.total.y=t.center.y):(a.a1.alpha=1,t.center.alpha=0,t.addChild(a)),t.center.x=t.total.x,t.center.y=t.total.y}},frame1:function(){var t=this;instance.NBDownTip.showTip("移动风向观察现象");var e=(0,n.default)(0,0);t.path.addChild(e);var a=!0;t.path.play(),t.path.animationSpeed=1,t.wind.visible=!0,t.wind.play();for(var i=[],o=600,r=400,h=0;h<200;h++){c=2*Math.PI/200;var d={x:t.point.x+o*Math.cos(c*h),y:t.point.x+r*Math.sin(c*h)};i.push(d)}NBGesture.addGesture(t.path,NBGesture.gesture.TAP,function(){a?(a=!1,t.path.stop(),t.wind.visible=!1):(a=!0,t.path.play(),t.path.animationSpeed=1,t.wind.visible=!0,t.wind.play(),t.wind.animationSpeed=.5)}),t.path.x=i[0].x,t.path.y=i[0].y;var l,s,p,c=0;t.path.addEventListener(TouchEvent.TOUCH_BEGIN,function(a){var n=t.toLocal({x:a.data.global.x,y:a.data.global.y});l=Math.atan2((n.y-t.point.y)*o/r,n.x-t.point.x),t.path.addEventListener(TouchEvent.TOUCH_MOVE,f),t.path.removeChild(e),instance.NBDownTip.hideTip()}),t.path.addEventListener(TouchEvent.TOUCH_END,function(){t.path.removeListener(TouchEvent.TOUCH_MOVE,f)}),t.path.addEventListener(TouchEvent.TOUCH_END_OUDSIDE,function(){t.path.removeListener(TouchEvent.TOUCH_MOVE,f)});var v=t.point.totalFrames-1;function f(e){var a=t.toLocal({x:e.data.global.x,y:e.data.global.y});s=Math.atan2((a.y-t.point.y)*o/r,a.x-t.point.x)-l,l=Math.atan2((a.y-t.point.y)*o/r,a.x-t.point.x),c+=s,t.path.x=t.point.x+o*Math.cos(c),t.path.y=t.point.y+r*Math.sin(c),t.wind.rotation=c;var n=Math.atan2((a.y-t.point.y)*o/r,a.x-t.point.x)%6.28;t.point.currentFrame=(v-v*n/6.28)%v,void 0==p&&(p=c),p-c>Math.PI?c+=2*Math.PI:p-c<-Math.PI?c-=2*Math.PI:p=c,t.wind.x=t.path.x,t.wind.y=t.path.y}t.wind.x=t.path.x,t.wind.y=t.path.y},start:function(){this.bindScriptToSprite(this.frame0,"frame0"),this.bindScriptToSprite(this.frame1,"frame1")},info:{experimentImport:"大家知道风向标的作用吗？接下来我们制作一个风向标。",labName:"制作风向标",title0:"拼接好风向标",title1:"移动风向观察现象",CONCLUSION:"风向标可以用来测量风向。"},const:{},event:{}}),t.exports=nb.substance0230}});